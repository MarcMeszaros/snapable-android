<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                      http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <!-- get the reference to the parent POM -->
    <parent>
        <groupId>ca.hashbrown.snapable</groupId>
        <artifactId>parent</artifactId>
        <version>1.0</version>
    </parent>

    <!-- define the application -->
    <artifactId>app</artifactId>
    <packaging>apk</packaging>
    <name>Snapable - app</name>

    <!-- include required dependencies declared in the parent POM -->
    <dependencies>
        <!-- the Android SDK library -->
        <dependency>
            <groupId>android</groupId>
            <artifactId>android</artifactId>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>org.codegist.crest</groupId>
            <artifactId>codegist-crest</artifactId>
        </dependency>

        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
        </dependency>

        <dependency>
              <groupId>android.support</groupId>
              <artifactId>compatibility-v4</artifactId>
        </dependency>

    </dependencies>

    <!-- override some defaults with module specific parameters -->
    <build>
        <finalName>Snapable-${project.version}</finalName>
        <sourceDirectory>src</sourceDirectory>

        <plugins>

            <!-- android maven plugin -->
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>

            </plugin>

        </plugins>

    </build>

    <!-- build profiles -->
    <profiles>
        <profile>
            <id>testflight</id>
            <build>
                <plugins>
                    <!-- android maven plugin -->
                    <plugin>
                        <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                        <artifactId>android-maven-plugin</artifactId>
                        <inherited>true</inherited>
                        <configuration>
                            <sign>
                                <debug>false</debug>
                            </sign>
                            <proguard>
                                <skip>true</skip>
                            </proguard>
                            <zipalignInputApk>${project.build.directory}/Snapable-${project.version}.apk</zipalignInputApk>
                            <zipalignOutputApk>${project.build.directory}/Snapable-${project.version}-final.apk</zipalignOutputApk>
                            <zipalignVerbose>true</zipalignVerbose>
                        </configuration>
                    </plugin>

                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-jarsigner-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>signing</id>
                                <goals>
                                    <goal>sign</goal>
                                </goals>
                                <phase>package</phase>
                                <inherited>true</inherited>
                                <configuration>
                                    <archiveDirectory>target</archiveDirectory>
                                    <includes>
                                        <include>Snapable-${project.version}.apk</include>
                                    </includes>
                                    <removeExistingSignatures>true</removeExistingSignatures>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>

                </plugins>
            </build>
        </profile>

        <profile>
            <id>release</id>
            <build>
                <plugins>
                    <!-- android maven plugin -->
                    <plugin>
                        <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                        <artifactId>android-maven-plugin</artifactId>
                        <inherited>true</inherited>
                        <configuration>
                            <sign>
                                <debug>false</debug>
                            </sign>
                            <proguard>
                                <skip>false</skip>
                            </proguard>
                            <zipalignInputApk>${project.build.directory}/Snapable-${project.version}.apk</zipalignInputApk>
                            <zipalignOutputApk>${project.build.directory}/Snapable-${project.version}-final.apk</zipalignOutputApk>
                            <zipalignVerbose>true</zipalignVerbose>
                        </configuration>
                    </plugin>

                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-jarsigner-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>signing</id>
                                <goals>
                                    <goal>sign</goal>
                                </goals>
                                <phase>package</phase>
                                <inherited>true</inherited>
                                <configuration>
                                    <archiveDirectory>target</archiveDirectory>
                                    <includes>
                                        <include>Snapable-${project.version}.apk</include>
                                    </includes>
                                    <removeExistingSignatures>true</removeExistingSignatures>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>

                </plugins>
            </build>
        </profile>
    </profiles>

</project>